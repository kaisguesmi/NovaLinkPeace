/* ==========================================================================
   STYLE.CSS - PEACELINK (Version Finale & Corrigée)
   ========================================================================== */

/* --- 1. Importations et Variables --- */
@import url('https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;600&family=Poppins:wght@500;600;700&display=swap');

:root {
    /* Palette de couleurs */
    --bleu-pastel: #5DADE2;
    --bleu-hover: #3498DB;
    --vert-doux: #7BD389;
    --vert-hover: #58D68D;
    --orange-chaud: #F4A261;
    --orange-hover: #E67E22;
    --rouge-alerte: #E74C3C;
    --blanc-pur: #FFFFFF;
    
    /* Gris et Fonds */
    --gris-clair: #f8f9fa;
    --gris-moyen: #e9ecef;
    --gris-fonce: #2c3e50;
    --bleu-nuit: #1B263B;
    
    /* Typographie */
    --font-titre: 'Poppins', sans-serif;
    --font-texte: 'Open Sans', sans-serif;
    
    /* Dimensions et Effets */
    --sidebar-width: 260px;
    --sidebar-width-collapsed: 80px;
    --topbar-height: 80px; /* Augmenté pour correspondre à la navbar front */
    --border-radius: 16px;
    --btn-radius: 50px;
    
    /* Ombres Modernes */
    --card-shadow: 0 10px 30px -5px rgba(0, 0, 0, 0.05);
    --hover-shadow: 0 20px 40px -5px rgba(0, 0, 0, 0.1);
    --btn-shadow: 0 4px 15px rgba(93, 173, 226, 0.3);
    
    --transition-speed: 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
}

/* --- 2. Styles de base et Reset --- */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
html { scroll-behavior: smooth; }

body { 
    font-family: var(--font-texte); 
    background-color: var(--gris-clair); 
    color: var(--gris-fonce); 
    font-size: 16px; 
    line-height: 1.7; 
    -webkit-font-smoothing: antialiased;
}

a { text-decoration: none; color: inherit; transition: var(--transition-speed); }
button, input, select, textarea { font-family: inherit; }
ul { list-style: none; }

/* --- 3. BACKOFFICE : Sidebar --- */
.sidebar { 
    position: fixed; top: 0; left: 0; width: var(--sidebar-width); height: 100%; 
    background-color: var(--blanc-pur); display: flex; flex-direction: column; 
    border-right: 1px solid var(--gris-moyen); transition: width var(--transition-speed); 
    z-index: 1000; 
}

.sidebar-header { 
    padding: 0 25px; display: flex; align-items: center; 
    border-bottom: 1px solid var(--gris-moyen); min-height: var(--topbar-height); 
}
.sidebar-header .logo { display: flex; align-items: center; gap: 10px; font-weight: 700; color: var(--bleu-nuit); font-family: var(--font-titre); font-size: 1.2rem; }
.sidebar-header .logo img { max-height: 40px; width: auto; }

.sidebar-nav { flex-grow: 1; padding: 25px 15px; overflow-y: auto; }
.nav-item { 
    display: flex; align-items: center; padding: 14px 20px; margin-bottom: 8px; 
    border-radius: 12px; color: #666; font-weight: 600; cursor: pointer; 
    transition: all 0.2s ease; 
}
.nav-item:hover { background-color: #f0f7ff; color: var(--bleu-pastel); }
.nav-item.active { 
    background: linear-gradient(135deg, var(--bleu-pastel), var(--bleu-hover)); 
    color: var(--blanc-pur); box-shadow: var(--btn-shadow); 
}
.sidebar-footer { padding: 20px; border-top: 1px solid var(--gris-moyen); }

/* --- 4. BACKOFFICE : Layout & Topbar --- */
.main-content { margin-left: var(--sidebar-width); width: calc(100% - var(--sidebar-width)); transition: margin-left var(--transition-speed), width var(--transition-speed); }
.topbar { 
    height: var(--topbar-height); background-color: rgba(255, 255, 255, 0.9); 
    backdrop-filter: blur(10px); padding: 0 30px; display: flex; 
    align-items: center; justify-content: space-between; 
    border-bottom: 1px solid var(--gris-moyen); position: sticky; top: 0; z-index: 900; 
}
.content-wrapper { padding: 40px; }
.page-header h1 { font-family: var(--font-titre); font-size: 32px; color: var(--bleu-nuit); font-weight: 700; }

/* --- 5. BOUTONS MODERNES --- */
.btn, .btn-primary, .btn-secondary, .btn-success, .btn-danger {
    padding: 12px 24px; border-radius: var(--btn-radius); border: none; cursor: pointer;
    font-weight: 600; font-size: 14px; display: inline-flex; align-items: center; justify-content: center;
    gap: 8px; transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1); text-transform: uppercase;
}
.btn-primary { background: linear-gradient(135deg, var(--bleu-pastel), var(--bleu-hover)); color: var(--blanc-pur); box-shadow: 0 4px 10px rgba(93, 173, 226, 0.3); }
.btn-primary:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(93, 173, 226, 0.4); }

.btn-success { background: linear-gradient(135deg, var(--vert-doux), var(--vert-hover)); color: var(--blanc-pur); box-shadow: 0 4px 10px rgba(123, 211, 137, 0.3); }
.btn-success:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(123, 211, 137, 0.4); }

.btn-danger { background: linear-gradient(135deg, var(--rouge-alerte), #c0392b); color: var(--blanc-pur); box-shadow: 0 4px 10px rgba(231, 76, 60, 0.3); }
.btn-danger:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(231, 76, 60, 0.4); }

.btn-secondary { background-color: white; color: var(--gris-fonce); border: 1px solid #dcdfe6; }
.btn-secondary:hover { background-color: #f8f9fa; transform: translateY(-1px); color: var(--bleu-nuit); }

.btn-small { padding: 6px 14px; font-size: 12px; border-radius: 8px; text-transform: none; }

/* --- 6. CARTES & TABLEAUX --- */
.stat-card, .table-card, .mission-card, .event-card, .event-detail-card {
    background-color: var(--blanc-pur); padding: 30px; border-radius: var(--border-radius);
    box-shadow: var(--card-shadow); border: 1px solid rgba(0,0,0,0.02); transition: all var(--transition-speed);
}
.stat-card:hover, .mission-card:hover, .event-card:hover { transform: translateY(-5px); box-shadow: var(--hover-shadow); }

/* Stats Grid */
.stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 30px; }
.stat-icon { width: 64px; height: 64px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 24px; color: white; margin-right: 20px; flex-shrink: 0; }
.stat-icon.green { background: linear-gradient(135deg, var(--vert-doux), var(--vert-hover)); }
.stat-icon.orange { background: linear-gradient(135deg, var(--orange-chaud), var(--orange-hover)); }
.stat-value { font-family: var(--font-titre); font-size: 28px; font-weight: 700; color: var(--bleu-nuit); }

/* Tableaux */
.table-wrapper { overflow-x: auto; border-radius: var(--border-radius); }
.data-table { width: 100%; border-collapse: separate; border-spacing: 0; }
.data-table th { background-color: #f8f9fa; padding: 18px; text-align: left; font-family: var(--font-titre); font-size: 13px; color: #7f8c8d; text-transform: uppercase; border-bottom: 2px solid var(--gris-moyen); }
.data-table td { padding: 18px; border-bottom: 1px solid var(--gris-moyen); font-size: 15px; }

/* Badges */
.status-badge { padding: 6px 12px; border-radius: 30px; font-weight: 700; font-size: 11px; text-transform: uppercase; }
.status-badge.validé { background-color: rgba(123, 211, 137, 0.15); color: #27ae60; }
.status-badge.en_attente { background-color: rgba(244, 162, 97, 0.15); color: #d35400; }
.status-badge.refusé { background-color: rgba(231, 76, 60, 0.15); color: #c0392b; }

/* --- 7. FORMULAIRES --- */
input, select, textarea {
    width: 100%; padding: 12px 15px; border: 1px solid #dcdfe6; border-radius: 10px;
    font-size: 15px; color: var(--gris-fonce); background-color: #fff; transition: all 0.3s;
}
input:focus, select:focus, textarea:focus { outline: none; border-color: var(--bleu-pastel); box-shadow: 0 0 0 3px rgba(93, 173, 226, 0.15); }
label { font-weight: 600; margin-bottom: 8px; display: block; color: var(--bleu-nuit); font-size: 14px; }
.form-group { margin-bottom: 20px; }

/* --- 8. FRONT OFFICE : NAVBAR (CORRIGÉ) --- */
.main-navbar {
    width: 100%; height: 80px; 
    background-color: rgba(255, 255, 255, 0.95); backdrop-filter: blur(12px);
    box-shadow: 0 2px 20px rgba(0, 0, 0, 0.04);
    display: flex; justify-content: center; align-items: center;
    padding: 0 40px; position: fixed; top: 0; left: 0; z-index: 1001;
}
.navbar-container { width: 100%; max-width: 1200px; display: flex; justify-content: space-between; align-items: center; }

/* CORRECTION DU LOGO */
.navbar-brand a { display: flex; align-items: center; gap: 12px; text-decoration: none; }
.logo-img { 
    height: 50px !important; /* Taille fixe pour éviter le logo géant */
    width: auto !important; 
    object-fit: contain; 
}
.site-name { font-family: var(--font-titre); font-size: 24px; font-weight: 700; color: var(--bleu-nuit); white-space: nowrap; }

.navbar-links ul { display: flex; align-items: center; gap: 35px; }
.nav-link { font-weight: 600; font-size: 15px; color: var(--gris-fonce); padding: 8px 0; position: relative; }
.nav-link:hover, .nav-link.active { color: var(--bleu-pastel); }

.btn-join-us {
    background: linear-gradient(135deg, var(--orange-chaud), var(--orange-hover));
    color: white; padding: 10px 25px; border-radius: var(--btn-radius);
    box-shadow: 0 4px 10px rgba(244, 162, 97, 0.3);
}
.btn-join-us:hover { color: white; transform: translateY(-2px); }

/* --- 9. HERO SECTION --- */
.hero-section {
    display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center;
    min-height: 90vh; padding: 120px 20px 60px 20px;
    background: linear-gradient(120deg, #a1c4fd 0%, #c2e9fb 100%);
}
.hero-content h1 { font-family: var(--font-titre); font-size: 4rem; font-weight: 800; color: var(--bleu-nuit); margin-bottom: 20px; }
.hero-content p { font-size: 1.3rem; max-width: 700px; margin-bottom: 40px; color: #34495e; }
.hero-buttons { display: flex; gap: 15px; justify-content: center; }
.btn-hero-primary { background-color: var(--bleu-nuit); color: white; padding: 15px 35px; border-radius: var(--btn-radius); font-size: 1.1rem; }
.btn-hero-secondary { background-color: white; color: var(--bleu-nuit); padding: 15px 35px; border-radius: var(--btn-radius); font-size: 1.1rem; }

/* --- 10. MODULE INITIATIVES (CORRIGÉ) --- */
.initiatives-main {
    padding-top: 130px !important; /* Espacement suffisant sous la navbar */
    min-height: 100vh;
    background-color: var(--gris-clair);
}
.role-switcher { padding: 0 40px; margin-bottom: 30px; }
.role-switcher-inner {
    max-width: 1200px; margin: 0 auto; background-color: white; padding: 20px;
    border-radius: var(--border-radius); box-shadow: var(--card-shadow);
    display: flex; gap: 15px; align-items: center;
}

.mission-section { padding: 40px; }
.mission-container { max-width: 1200px; margin: 0 auto; }
.event-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 30px; margin-top: 30px; }

.event-card { display: flex; flex-direction: column; gap: 10px; border-left: 5px solid var(--bleu-pastel); }
.event-card h3 { font-family: var(--font-titre); font-size: 1.4rem; color: var(--bleu-nuit); }
.event-meta { color: #7f8c8d; font-size: 0.95rem; }
.event-card-footer { margin-top: auto; display: flex; gap: 10px; }

.event-detail-card { margin-top: 20px; }

/* --- 11. FOOTER --- */
.main-footer { background-color: var(--gris-clair); padding: 60px 40px 0 40px; border-top: 1px solid var(--gris-moyen); margin-top: 50px; }
.footer-container { max-width: 1200px; margin: 0 auto; display: grid; grid-template-columns: 2fr 1fr 1fr; gap: 40px; }
.footer-logo-img { height: 40px; width: 40px; }
.footer-brand { display: flex; align-items: center; gap: 10px; margin-bottom: 15px; }
.footer-brand .site-name { font-size: 22px; }
.social-icons { display: flex; gap: 15px; }
.social-icons a { width: 40px; height: 40px; border-radius: 50%; background-color: #e9ecef; display: flex; align-items: center; justify-content: center; color: var(--bleu-pastel); transition: 0.3s; }
.social-icons a:hover { background-color: var(--bleu-pastel); color: white; }
.footer-bottom { text-align: center; padding: 25px 0; border-top: 1px solid #e9ecef; margin-top: 40px; color: #888; font-size: 14px; }


/* --- 12. CHATBOT (CORRIGÉ) --- */
@keyframes pulse-glow {
    0% { box-shadow: 0 0 0 0 rgba(93, 173, 226, 0.7); }
    70% { box-shadow: 0 0 0 15px rgba(93, 173, 226, 0); }
    100% { box-shadow: 0 0 0 0 rgba(93, 173, 226, 0); }
}

#chatbot-button {
    width: 65px; height: 65px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--bleu-pastel), var(--bleu-hover));
    box-shadow: 0 8px 25px rgba(52, 152, 219, 0.4);
    animation: pulse-glow 2s infinite;
    
    /* POSITION FIXÉE À DROITE */
    position: fixed !important;
    bottom: 30px !important;
    right: 30px !important;
    left: auto !important; /* Annule tout alignement à gauche */
    
    z-index: 2000; display: flex; align-items: center; justify-content: center;
    font-size: 30px; color: white; cursor: pointer; transition: transform 0.3s;
}
#chatbot-button:hover { transform: scale(1.1); animation: none; }

#chatbot-box {
    width: 380px; height: 500px;
    position: fixed !important; bottom: 110px; right: 30px; /* Aligné avec le bouton */
    background: #fff; border-radius: 20px;
    box-shadow: 0 20px 50px rgba(0,0,0,0.15);
    display: flex; flex-direction: column; overflow: hidden;
    z-index: 2001; border: 1px solid rgba(0,0,0,0.05);
}

#chatbot-header {
    background: linear-gradient(135deg, var(--bleu-pastel), var(--bleu-hover));
    padding: 18px; color: white; font-weight: 600;
    display: flex; justify-content: space-between; align-items: center;
}

#chatbot-messages { flex-grow: 1; padding: 20px; background-color: #f4f6f9; overflow-y: auto; display: flex; flex-direction: column; gap: 12px; }
.msg { max-width: 80%; padding: 12px 16px; border-radius: 18px; font-size: 14px; line-height: 1.5; box-shadow: 0 2px 5px rgba(0,0,0,0.03); }
.user-msg { align-self: flex-end; background: linear-gradient(135deg, var(--bleu-pastel), var(--bleu-hover)); color: white; border-bottom-right-radius: 4px; }
.bot-msg { align-self: flex-start; background-color: white; color: var(--gris-fonce); border-bottom-left-radius: 4px; border: 1px solid #eee; }

#chatbot-input-area { padding: 15px; background: white; border-top: 1px solid #eee; display: flex; align-items: center; gap: 10px; }
#chatbot-input { border-radius: 25px; background: #f0f2f5; border: none; }
#chatbot-input:focus { background: white; box-shadow: 0 0 0 2px var(--bleu-pastel); }
#chatbot-send { width: 45px; height: 45px; border-radius: 50%; background: var(--bleu-pastel); color: white; display: flex; align-items: center; justify-content: center; cursor: pointer; border: none; }
#chatbot-send:hover { background: var(--bleu-hover); transform: scale(1.1); }

/* --- 13. RESPONSIVE --- */
.hidden { display: none !important; }

@media (max-width: 992px) {
    .sidebar { transform: translateX(-100%); }
    .main-content { margin-left: 0; width: 100%; }
}
@media (max-width: 768px) {
    .main-navbar { padding: 0 20px; }
    .hero-content h1 { font-size: 2.5rem; }
    .footer-container { grid-template-columns: 1fr; text-align: center; }
    .footer-brand { justify-content: center; }
    .social-icons { justify-content: center; }
    #chatbot-box { width: 90%; right: 5%; bottom: 100px; height: 60vh; }
}